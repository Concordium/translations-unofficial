.. _`Network Dashboard`: https://dashboard.testnet.concordium.com/
.. _Discord: https://discord.gg/xWmQ5tp

.. _run-a-node-uk:

===========
Запуск ноди
===========

.. contents::
   :local:
   :backlinks: none

У цьому керівництві ви дізнаєтеся, як запустити на своєму комп'ютері ноду для участі в мережі Concordium.
Це означає, що ви будете отримувати блоки і транзакції від інших нод (вузлів), а також ділитися інформацією про блоках і транзакціях з нодамі в Concordium мережі.
Слідуючи цьому керівництву, ви зможете

-  запустити ноду Concordium
-  знайти її на мережевий панелі
-  виконувати запити стану блокчейна Concordium безпосередньо з вашого комп'ютера

Вам не потрібен рахунок щоб запустити ноду.

Перед початком
==============

Перш ніж запустити ноду Concordium вам необхідно

1. Інсталювати та запустити Docker.

   -  на *Linux*, дати доступ програмі Docker запускатися як non-root користувач.

2. Завантажити і розархівувати програмне забезпечення :ref:`concordium-node-and-client-download`.

Оновлення з попередньої версії Open Testnet
===========================================

Для оновлення до поточної версії програмного забезпечення Concordium для Open Testnet 4:

-  Наступні дії по :ref:`завантаженню <downloads>` останньої версії програмного забезпечення Concordium.

-  Запустіть виконуваний файл ``concordium-node-reset-data`` з завантаженого архіву.

   -  Для користувачів *Mac*: коли в перший раз відкриваєте програму, правою кнопкою миші по файлу ``concordium-node-reset-data`` і виберете **Відкрити**.
      З'явиться повідомлення, що це програмне забезпечення від невідомого розробника. Виберіть **Відкрити** знову.
   -  Для користувачів *Windows*: коли в перший раз відкриваєте програму, двічі клікніть на ``concordium-node-reset-data``.
      З'явиться повідомлення, що це програмне беспеченіе від невідомого розробника. Виберіть **Деталі** → **Запустити все одно**.

-  Програма запитає:

      *Do you also want to remove saved keys?*

   Рахунки які були створені для попередніх версій тестнета більш не дійсні.
   Отже, якщо у вас є збережені рахунки, ми рекомендуємо вибрати опцію **y**, яка видалить всі старі записи.

.. _running-a-node-uk:

Запуск ноди
==============

Щоб запустити клієнт, який приєднається до відкритої тестової мережі, виконайте наступні дії:

1. Запустіть ``concordium-node`` з завантаженого архіву.

-  Для користувачів *Mac*: коли в перший раз відкриваєте програму, правою кнопкою миші по файлу ``concordium-node-reset-data`` і виберете **Відкрити**.
   З'явиться повідомлення, що це програмне забезпечення від невідомого розробника. Виберіть **Відкрити** знову.
-  Для користувачів *Windows*: коли в перший раз відкриваєте програму, двічі клікніть на ``concordium-node-reset-data``.
   З'явиться повідомлення, що це програмне беспеченіе від невідомого розробника. Виберіть **Деталі** → **Запустити все одно**.
-  Під час *перезавантаження* ноди рекомендується використовувати опцію ``--no-block-state-import``.
   Це дозволить завантажити тільки ті поновлення блокчейна Concordium, які повяла поки нода була неактивна і прискорить процес завантаження ноди.

2. Введіть ім'я вашої Ноди. Це ім'я буде відображатися на загальній панелі.

3. Якщо інструмент був запущений раніше, вас запитають, чи хочете ви перед запуском видалити локальну базу даних Ноди.
   Якщо ви натиснете **y**, будуть видалені, а потім завантажені заново і відновлені всі дані про стан блокчейна Concordium, після чого збережені вам на комп'ютер.
   **Майте на увазі, що видалення локальної бази даних призведе до того, що ваша нода буде довше синхронізуватися з мережею Concordium**

Після цього програма завантажить образ Concordium Client і завантажить його в Docker.
Клієнт запуститься і почне виведення інформації про роботу ноди.

Знаходимо свою ноду на загальній панелі
=======================================

Після того, як ви ззапустите ``concordium-node``, ви зможете:

-  побачити вашу ноду у `Network Dashboard`_
-  :ref:`виконувати запити <testnet-query-node>` для отримання інформації про блоки, транзакції та рахунки

Мережева панель
---------------

Клієнту знадобиться час, щоб синхронізуватися з поточним станом блокчейна Concordium.
Синхронізація включає, наприклад, завантаження інформації про всі блоках в ланцюжку.

Крім іншої інформації, на панелі `Network Dashboard`_ ви можете отримати уявлення про те, як довго вашої ноді необхідно синхронізуватися.
Для цього вам необхідно порівняти значення Ноди **Length** (кількість блоків, які отримала ваша нода) зі значенням **Chain Len** (кількість блоків в самій довгому ланцюжку в мережі),
яке ви можете знайти зверху сторінки панелі.

Включення вхідних підключень
============================

Якщо ви використовуєте свій вузол за брандмауером або за домашнім роутером,
то ви, мабуть, зможете підключитися до інших нод, але інші ноди не зможуть ініціювати підключення до вашої.
Це нормально, і ваша нода буде повністю брати участь в мережі Concordium.
Буде можливість відправляти транзакції і :ref:`якщо буде налаштоване <become-a-baker-uk>`, готувати блоки і фіналізувати.

Однак, ви також можете зробити свою ноду більш корисним учасником мережі, якщо дозволите вхідні підключення.
За замовчуванням ``concordium-node`` слухає ``8888`` порт для вхідних запитів.
Залежно від вашої мережі і конфігурації платформи, вам необхідно увімкнути зовнішній порт ``8888`` на вашому роутері або відкрити його в брандамуері.
Деталі настройки сильно залежать від конфігурації вашої мережі.

Налаштування портів
-------------------

Нода слухає 4 порти, які можуть бути налаштовані шляхом передачі відповідних параметрів команд при запуску ноди. Порти, використовувані нодою:

-  8888, порт для peer-to-peer мережевої взаємодії, може бути змінений параметром ``--listen-node-port``
-  8082, порт, який використовується для middleware, може бути змінений параметром ``--listen-middleware-port``
-  10000, порт gRPC, може бути змінений параметром ``--listen-grpc-port``

При зміні портів, docker контейнер повинен бути зупинений (:ref:`stop-a-node-uk`), скинутий, і запущений заново.
Для скидання контейнера можна використовувати ``concordium-node-reset-data`` або команду ``docker rm concordium-client`` в терміналі.

Ми *наполегливо рекомендуємо* щоб ваш брандамуер був відкритий тільки на підключення по порту 8888 (peer-to-peer підключення).
Відкритий доступ до інших портів може призвести до того, що зловмисник отримає доступ до вашої ноді або рахунками, які в ній зберігаються.

.. _stop-a-node-uk:

Зупинити ноду
=============

Щоб зупинити ноду, натисніть в терміналі **CTRL+c**, і дочекайтеся поки нода виконає очищення і припинить роботу.

Якщо ви випадково закриєте вікно без явного завершення роботи ноди, вона буде продовжувати працювати у фоновому режимі в Docker.
У цьому випадку використовуйте файл ``concordium-node-stop`` таким же чином, як і ``concordium-node``.

Підтримка і зворотний зв'язок
=============================

Інформацію про логах вашої ноди можна отримати за допомогою інструмента ``concordium-node-retrieve-logs``.
Ця утиліта збереже логи з запущеного образу в файл. Крім того, при наявності відповідного дозволу, вона може записати інформацію про програми, запущених в даний час в системі.

Ви можете відправити логи, системну інформацію, питання, коментарі та побажання на електронну пошту testnet@concordium.com.
Також ви можете знайти нас в `Discord`_, або звернутися на сторінку :ref:`усунення несправностей <troubleshooting-and-known-issues>`
